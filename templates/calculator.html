<!-- calculator.html -->
{% extends "base.html" %}

{% block title %}Калькулятор баллов - Талапкер{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <h1>Калькулятор баллов</h1>
    <form class="calculator-form" id="calcForm">
      <input type="number" name="val1" placeholder="Баллы по предмету 1" required>
      <input type="number" name="val2" placeholder="Баллы по предмету 2" required>
      <input type="number" name="val3" placeholder="Баллы по предмету 3" required>
      <button type="submit" class="btn">Рассчитать</button>
    </form>
    <p id="calcResult"></p>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('calcForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const vals = [
    parseFloat(e.target.val1.value) || 0,
    parseFloat(e.target.val2.value) || 0,
    parseFloat(e.target.val3.value) || 0
  ];
  const res = await fetch('/api/calc', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ vals })
  });
  const data = await res.json();
  document.getElementById('calcResult').textContent = `Общий балл: ${data.total}. ${data.message}`;
});
</script>
{% endblock %}