{% extends "base.html" %}
{% block title %}О университете — Талапкер{% endblock %}

{% block content %}

<!-- ГЕРОЙ-СЕКЦИЯ С КАРУСЕЛЬЮ -->
<section class="university-hero" data-aos="fade-in">
  <div class="hero-carousel" id="universityCarousel">
    <!-- Слайд 1 -->
    <div class="hero-slide active" style="background-image: url('{{ url_for('static', filename='images/university/1.jpg') }}');">
      <div class="hero-overlay"></div>
      <div class="container hero-content">
        <div class="hero-caption text-safe" data-aos="fade-up" data-aos-delay="300">
          <h1 class="hero-title">Современный кампус</h1>
          <p class="hero-text text-safe">Инновационная инфраструктура для обучения и исследований</p>
        </div>
      </div>
    </div>

    <!-- Слайд 2 -->
    <div class="hero-slide" style="background-image: url('{{ url_for('static', filename='images/university/2.jpg') }}');">
      <div class="hero-overlay"></div>
      <div class="container hero-content">
        <div class="hero-caption text-safe" data-aos="fade-up" data-aos-delay="300">
          <h1 class="hero-title">Активная жизнь</h1>
          <p class="hero-text text-safe">Клубы, спорт, наука, творчество — всё для гармоничного развития</p>
        </div>
      </div>
    </div>

    <!-- Слайд 3 -->
    <div class="hero-slide" style="background-image: url('{{ url_for('static', filename='images/university/3.jpg') }}');">
      <div class="hero-overlay"></div>
      <div class="container hero-content">
        <div class="hero-caption text-safe" data-aos="fade-up" data-aos-delay="300">
          <h1 class="hero-title">Будущее начинается здесь</h1>
          <p class="hero-text text-safe">Передовые исследования и технологии мирового уровня</p>
        </div>
      </div>
    </div>

    <!-- Стрелки -->
    <button class="carousel-btn prev" id="prevBtn">←</button>
    <button class="carousel-btn next" id="nextBtn">→</button>

    <!-- Точки -->
    <div class="carousel-dots">
      <span class="dot active" data-slide="0"></span>
      <span class="dot" data-slide="1"></span>
      <span class="dot" data-slide="2"></span>
    </div>
  </div>
</section>

<!-- ОСНОВНАЯ ИНФОРМАЦИЯ -->
<section class="university-intro py-6">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h1 class="display-4 fw-bold text-primary">Университет имени К. Жубанова</h1>
      <p class="lead text-muted mt-3 text-safe">
        Лидер высшего образования в Казахстане. Традиции. Инновации. Лидерство.
      </p>
    </div>
  </div>
</section>

<!-- СТАТИСТИКА -->
<section class="stats-section py-5 bg-gradient-light">
  <div class="container">
    <div class="stats-grid">
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
        <div class="stat-icon text-accent"><i class="fas fa-trophy"></i></div>
        <div class="stat-value" data-count="12">0</div>
        <p class="stat-label text-safe">Место в РК</p>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
        <div class="stat-icon text-secondary"><i class="fas fa-users"></i></div>
        <div class="stat-value" data-count="8500">0</div>
        <p class="stat-label text-safe">Студентов</p>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
        <div class="stat-icon text-success"><i class="fas fa-graduation-cap"></i></div>
        <div class="stat-value" data-count="97">0</div>
        <p class="stat-label text-safe">% Трудоустройства</p>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="400">
        <div class="stat-icon text-info"><i class="fas fa-globe"></i></div>
        <div class="stat-value" data-count="40">0</div>
        <p class="stat-label text-safe">Стран-партнёров</p>
      </div>
    </div>
  </div>
</section>

<!-- ИСТОРИЯ -->
<section class="history-section py-6">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6" data-aos="fade-right">
        <h2 class="section-title mb-4">Наша история</h2>
        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-year">1957</div>
            <p class="text-safe">Основан как педагогический институт</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">1990-е</div>
            <p class="text-safe">Расширение программ и направлений</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">2020+</div>
            <p class="text-safe">Лидер цифровизации и инноваций</p>
          </div>
          <div class="timeline-item active">
            <div class="timeline-year">Сегодня</div>
            <p class="text-safe">ТОП-15 вузов Казахстана</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6 text-center" data-aos="fade-left">
        <img src="{{ url_for('static', filename='images/university/history.jpg') }}" alt="История" class="img-fluid rounded-lg shadow-lg history-img">
      </div>
    </div>
  </div>
</section>

<!-- ПАРТНЁРЫ -->
<section class="partners-section py-6 bg-dark text-white">
  <div class="container">
    <h2 class="text-center mb-5" data-aos="fade-up">Наши партнёры</h2>
    <div class="partners-grid">
      <div class="partner-card" data-aos="fade-up" data-aos-delay="100">
        <img src="{{ url_for('static', filename='images/partners/heriot.png') }}" alt="Heriot-Watt">
        <span class="partner-name text-safe">Heriot-Watt University</span>
      </div>
      <div class="partner-card" data-aos="fade-up" data-aos-delay="200">
        <img src="{{ url_for('static', filename='images/partners/halyk.png') }}" alt="Halyk Bank">
        <span class="partner-name text-safe">Halyk Bank</span>
      </div>
      <div class="partner-card" data-aos="fade-up" data-aos-delay="300">
        <img src="{{ url_for('static', filename='images/partners/tencent.png') }}" alt="Tencent">
        <span class="partner-name text-safe">Tencent</span>
      </div>
      <div class="partner-card" data-aos="fade-up" data-aos-delay="400">
        <img src="{{ url_for('static', filename='images/partners/nazarbayev.png') }}" alt="Nazarbayev University">
        <span class="partner-name text-safe">Nazarbayev University</span>
      </div>
      <div class="partner-card" data-aos="fade-up" data-aos-delay="500">
        <img src="{{ url_for('static', filename='images/partners/bolashak.png') }}" alt="Bolashak">
        <span class="partner-name text-safe">Программа «Болашак»</span>
      </div>
    </div>
  </div>
</section>

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({ duration: 900, once: true, offset: 100 });

  // === СЧЁТЧИКИ ===
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.querySelectorAll('.stat-value').forEach(counter => {
          const target = +counter.getAttribute('data-count');
          const duration = 2000;
          const step = target / (duration / 16);
          let current = 0;
          const timer = setInterval(() => {
            current += step;
            if (current >= target) {
              counter.textContent = target;
              clearInterval(timer);
            } else {
              counter.textContent = Math.floor(current);
            }
          }, 16);
        });
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.6 });

  document.querySelectorAll('.stat-card').forEach(card => observer.observe(card));

  // === КАРУСЕЛЬ ===
  const slides = document.querySelectorAll('.hero-slide');
  const dots = document.querySelectorAll('.dot');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  let current = 0;
  let interval;

  function show(n) {
    slides.forEach((s, i) => s.classList.toggle('active', i === n));
    dots.forEach((d, i) => d.classList.toggle('active', i === n));
    current = n;
  }

  function next() { show((current + 1) % slides.length); }
  function prev() { show((current - 1 + slides.length) % slides.length); }

  prevBtn.onclick = () => { prev(); reset(); };
  nextBtn.onclick = () => { next(); reset(); };
  dots.forEach((dot, i) => dot.onclick = () => { show(i); reset(); });

  function auto() { interval = setInterval(next, 6000); }
  function reset() { clearInterval(interval); auto(); }

  document.querySelector('.hero-carousel').addEventListener('mouseenter', () => clearInterval(interval));
  document.querySelector('.hero-carousel').addEventListener('mouseleave', auto);

  auto();
</script>
{% endblock %}