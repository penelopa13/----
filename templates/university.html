{% extends "base.html" %}
{% block title %}{{ t('О университете') }} — {{ t('Талапкер') }}{% endblock %}

{% block content %}

<!-- ГЕРОЙ-СЕКЦИЯ С КАРУСЕЛЬЮ -->
<section class="university-hero" data-aos="fade-in">
  <div class="hero-carousel" id="universityCarousel">
    <!-- Слайд 1 -->
    <div class="hero-slide active" style="background-image: url('{{ url_for('static', filename='images/university/1.jpg') }}');">
      <div class="hero-overlay"></div>
      <div class="container hero-content">
        <div class="hero-caption text-safe" data-aos="fade-up" data-aos-delay="300">
          <h1 class="hero-title">{{ t('Современный кампус') }}</h1>
          <p class="hero-text text-safe">{{ t('Инновационная инфраструктура для обучения и исследований') }}</p>
        </div>
      </div>
    </div>

    <!-- Слайд 2 -->
    <div class="hero-slide" style="background-image: url('{{ url_for('static', filename='images/university/2.jpg') }}');">
      <div class="hero-overlay"></div>
      <div class="container hero-content">
        <div class="hero-caption text-safe" data-aos="fade-up" data-aos-delay="300">
          <h1 class="hero-title">{{ t('Активная жизнь') }}</h1>
          <p class="hero-text text-safe">{{ t('Клубы, спорт, наука, творчество — всё для гармоничного развития') }}</p>
        </div>
      </div>
    </div>

    <!-- Слайд 3 -->
    <div class="hero-slide" style="background-image: url('{{ url_for('static', filename='images/university/3.jpg') }}');">
      <div class="hero-overlay"></div>
      <div class="container hero-content">
        <div class="hero-caption text-safe" data-aos="fade-up" data-aos-delay="300">
          <h1 class="hero-title">{{ t('Будущее начинается здесь') }}</h1>
          <p class="hero-text text-safe">{{ t('Передовые исследования и технологии мирового уровня') }}</p>
        </div>
      </div>
    </div>

    <!-- Стрелки -->
    <button class="carousel-btn prev" id="prevBtn">←</button>
    <button class="carousel-btn next" id="nextBtn">→</button>

    <!-- Точки -->
    <div class="carousel-dots">
      <span class="dot active" data-slide="0"></span>
      <span class="dot" data-slide="1"></span>
      <span class="dot" data-slide="2"></span>
    </div>
  </div>
</section>

<!-- ОСНОВНАЯ ИНФОРМАЦИЯ -->
<section class="university-intro py-6">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h1 class="display-4 fw-bold text-primary">{{ t('Университет имени К. Жубанова') }}</h1>
      <p class="lead text-muted mt-3 text-safe">
        {{ t('Лидер высшего образования в Казахстане. Традиции. Инновации. Лидерство.') }}
      </p>
    </div>
  </div>
</section>

<!-- СТАТИСТИКА (ОБНОВЛЕНА 2024–2025) -->
<section class="stats-section py-5 bg-gradient-light">
  <div class="container">
    <div class="stats-grid">
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
        <div class="stat-icon text-accent"><i class="fas fa-trophy"></i></div>
        <div class="stat-value" data-count="43">0</div>
        <p class="stat-label text-safe">{{ t('Место в рейтинге 4ICU (2024)') }}</p>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
        <div class="stat-icon text-secondary"><i class="fas fa-users"></i></div>
        <div class="stat-value" data-count="14000">0</div>
        <p class="stat-label text-safe">{{ t('Студентов') }}</p>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
        <div class="stat-icon text-success"><i class="fas fa-award"></i></div>
        <div class="stat-value" data-count="26">0</div>
        <p class="stat-label text-safe">{{ t('Программ в топ-10 «Атамекен»') }}</p>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="400">
        <div class="stat-icon text-info"><i class="fas fa-globe"></i></div>
        <div class="stat-value" data-count="660">0</div>
        <p class="stat-label text-safe">{{ t('Место QS Asia University Rankings') }}</p>
      </div>
    </div>
  </div>
</section>



<!-- ИСТОРИЯ -->
<section class="history-section py-6">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6" data-aos="fade-right">
        <h2 class="section-title mb-4">{{ t('История университета') }}</h2>
        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-year">1931</div>
            <p class="text-safe">{{ t('Открыт как Актюбинский двухгодичный учительский институт.') }}</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">1945</div>
            <p class="text-safe">{{ t('Институту присвоено имя поэта Нурпеиса Байганина.') }}</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">1966</div>
            <p class="text-safe">{{ t('Преобразован в Актюбинский педагогический институт.') }}</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">1990</div>
            <p class="text-safe">{{ t('Институту присвоено имя профессора Кудайбергена Жубанова.') }}</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">1996</div>
            <p class="text-safe">{{ t('Реорганизован в Актюбинский университет им. К. Жубанова.') }}</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-year">2013</div>
            <p class="text-safe">{{ t('Объединён с педагогическим институтом в региональный университет.') }}</p>
          </div>
          <div class="timeline-item active">
            <div class="timeline-year">2019</div>
            <p class="text-safe">{{ t('Преобразован в НАО «Актюбинский региональный университет имени К. Жубанова».') }}</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6 text-center" data-aos="fade-left">
        <img src="{{ url_for('static', filename='images/university/history.jpg') }}" 
             alt="{{ t('История университета') }}"
             class="img-fluid rounded-lg shadow-lg history-img">
      </div>
    </div>
  </div>
</section>



{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({ duration: 900, once: true, offset: 100 });

  // === СЧЁТЧИКИ ===
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.querySelectorAll('.stat-value').forEach(counter => {
          const target = +counter.getAttribute('data-count');
          const duration = 2000;
          const step = target / (duration / 16);
          let current = 0;
          const timer = setInterval(() => {
            current += step;
            if (current >= target) {
              counter.textContent = target;
              clearInterval(timer);
            } else {
              counter.textContent = Math.floor(current);
            }
          }, 16);
        });
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.6 });

  document.querySelectorAll('.stat-card').forEach(card => observer.observe(card));

  // === КАРУСЕЛЬ ===
  const slides = document.querySelectorAll('.hero-slide');
  const dots = document.querySelectorAll('.dot');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  let current = 0;
  let interval;

  function show(n) {
    slides.forEach((s, i) => s.classList.toggle('active', i === n));
    dots.forEach((d, i) => d.classList.toggle('active', i === n));
    current = n;
  }

  function next() { show((current + 1) % slides.length); }
  function prev() { show((current - 1 + slides.length) % slides.length); }

  prevBtn.onclick = () => { prev(); reset(); };
  nextBtn.onclick = () => { next(); reset(); };
  dots.forEach((dot, i) => dot.onclick = () => { show(i); reset(); });

  function auto() { interval = setInterval(next, 6000); }
  function reset() { clearInterval(interval); auto(); }

  document.querySelector('.hero-carousel').addEventListener('mouseenter', () => clearInterval(interval));
  document.querySelector('.hero-carousel').addEventListener('mouseleave', auto);

  auto();
</script>
{% endblock %}