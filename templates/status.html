{% extends "base.html" %}
{% block title %}{{ t('Подать заявку') }}{% endblock %}

{% block content %}
<div class="container py-5">
  <h1 class="text-center mb-5">{{ t('Подать заявку на поступление') }}</h1>
  
  <form method="POST" action="{{ url_for('submit_application') }}" class="card shadow p-5 mx-auto" style="max-width:750px;">
    <div class="row g-3">

      <!-- Имя и Фамилия -->
      <div class="col-md-6">
        <input name="first_name" placeholder="{{ t('Имя') }}" class="form-control" required>
      </div>
      <div class="col-md-6">
        <input name="last_name" placeholder="{{ t('Фамилия') }}" class="form-control" required>
      </div>

      <!-- Контакты -->
      <div class="col-12">
        <input name="phone" placeholder="{{ t('Телефон') }}" class="form-control" required>
      </div>
      <div class="col-12">
        <input name="email" type="email" placeholder="{{ t('Email') }}" class="form-control" required>
      </div>

      <!-- Образование -->
      <div class="col-12">
        <input name="education" placeholder="{{ t('Школа / колледж') }}" class="form-control" required>
      </div>

      <!-- Уровень образования -->
      <div class="col-12">
        <label for="education_level" class="form-label">{{ t('Уровень образования') }}</label>
        <select name="education_level" id="education_level" class="form-select" required>
          <option value="" disabled selected>{{ t('Выберите уровень образования') }}</option>
          <option value="bachelor">{{ t('Бакалавриат') }}</option>
          <option value="master">{{ t('Магистратура') }}</option>
          <option value="doctor">{{ t('Докторантура') }}</option>
        </select>
      </div>

      <!-- Желаемая специальность -->
      <div class="col-12">
        <label for="specialty" class="form-label">{{ t('Желаемая специальность') }}</label>
        <select name="specialty" id="specialty" class="form-select" required>
          <option value="" disabled selected>{{ t('Выберите желаемую специальность') }}</option>
        </select>
      </div>

      <!-- Комментарий -->
      <div class="col-12">
        <textarea name="comment" placeholder="{{ t('Комментарий (по желанию)') }}" class="form-control" rows="4"></textarea>
      </div>

      <!-- Кнопка отправки -->
      <div class="col-12 text-center mt-4">
        <button type="submit" class="btn btn-success btn-lg px-5">{{ t('Отправить заявку') }}</button>
      </div>
    </div>
  </form>
</div>

<script>
  const groups = {
    bachelor: [
      {label: "Факультет педагогики и менеджмента в образовании", options: [
        {value: "6B01102", text: "6B01102 — Психология и менеджмент образования"},
        {value: "6B01201", text: "6B01201 — Дошкольное обучение и воспитание"},
        {value: "6B01301", text: "6B01301 — Педагогика и методика начального обучения"},
        {value: "6B01902", text: "6B01902 — Специальная педагогика"},
        {value: "6B03101", text: "6B03101 — Психология"},
        {value: "6B03102", text: "6B03102 — Клиническая психология"}
      ]},
      {label: "Исторический факультет", options: [
        {value: "6B01506", text: "6B01506 — География"},
        {value: "6B01603", text: "6B01603 — История и обществознание"},
        {value: "6B02201", text: "6B02201 — История"},
        {value: "6B05203", text: "6B05203 — Ландшафтное проектирование"},
        {value: "6B11101", text: "6B11101 — Туризм"}
      ]},
      {label: "Профессионально-творческий факультет", options: [
        {value: "6B01401", text: "6B01401 — Музыкальное образование"},
        {value: "6B01404", text: "6B01404 — Физическая культура и спорт"},
        {value: "6B01406", text: "6B01406 — Художественное образование"},
        {value: "6B02101", text: "6B02101 — Хореография"},
        {value: "6B02102", text: "6B02102 — Дизайн"},
        {value: "6B07207", text: "6B07207 — Технология и конструирование изделий лёгкой промышленности"},
        {value: "6B11102", text: "6B11102 — Культурно-досуговая работа"},
        {value: "6B01407", text: "6B01407 — Трудовое обучение и основы предпринимательства"}
      ]},
      {label: "Технический факультет", options: [
        {value: "6B07106", text: "6B07106 — Электроэнергетика"},
        {value: "6B07107", text: "6B07107 — Автоматизация и управление"},
        {value: "6B07201", text: "6B07201 — Горное дело"},
        {value: "6B07202", text: "6B07202 — Нефтегазовое дело"},
        {value: "6B07203", text: "6B07203 — Металлургия"},
        {value: "6B07301", text: "6B07301 — Строительство"},
        {value: "6B11301", text: "6B11301 — Организация перевозок, движения и эксплуатация транспорта"},
        {value: "6B07101", text: "6B07101 — Транспорт, транспортная техника и технологии"}
      ]},
      {label: "Факультет естествознания", options: [
        {value: "6B01513", text: "6B01513 — Биология"},
        {value: "6B05101", text: "6B05101 — Биология"},
        {value: "6B05102", text: "6B05102 — Биотехнология"},
        {value: "6B05201", text: "6B05201 — Экология"},
        {value: "6B05302", text: "6B05302 — Химия"},
        {value: "6B01514", text: "6B01514 — Химия"},
        {value: "6B07206", text: "6B07206 — Технология продовольственных продуктов"}
      ]},
      {label: "Физико-математический факультет", options: [
        {value: "6B01501", text: "6B01501 — Математика"},
        {value: "6B05301", text: "6B05301 — Физика"},
        {value: "6B05401", text: "6B05401 — Математика"},
        {value: "6B06103", text: "6B06103 — Вычислительная техника и программное обеспечение"},
        {value: "6B01503", text: "6B01503 — Информатика"},
        {value: "6B06105", text: "6B06105 — Компьютерная инженерия"},
        {value: "6B06102", text: "6B06102 — IT-медицина"},
        {value: "6B01512", text: "6B01512 — Физика"}
      ]},
      {label: "Филологический факультет", options: [
        {value: "6B01701", text: "6B01701 — Казахский язык и литература"},
        {value: "6B01702", text: "6B01702 — Русский язык и литература"},
        {value: "6B02304", text: "6B02304 — Филология: казахская филология"}
      ]},
      {label: "Факультет иностранных языков", options: [
        {value: "6B01706", text: "6B01706 — Иностранный язык: два иностранных языка"},
        {value: "6B02302", text: "6B02302 — Переводческое дело"},
        {value: "6B02303", text: "6B02303 — Иностранная филология"},
        {value: "6B01708", text: "6B01708 — Английский язык"}
      ]},
      {label: "Факультет экономики и права", options: [
        {value: "6B04101", text: "6B04101 — Экономика"},
        {value: "6B04102", text: "6B04102 — Менеджмент"},
        {value: "6B04103", text: "6B04103 — Учет и аудит"},
        {value: "6B04104", text: "6B04104 — Финансы"},
        {value: "6B04105", text: "6B04105 — Государственное и местное управление"},
        {value: "6B04201", text: "6B04201 — Право"}
      ]},
      {label: "Heriot-Watt Campus", options: [
        {value: "6B06107", text: "6B06107 — Компьютерная инженерия (Heriot-Watt)"},
        {value: "6B07108", text: "6B07108 — Электроэнергетика (Heriot-Watt)"},
        {value: "6B07209", text: "6B07209 — Нефтяная инженерия и энергоменеджмент (Heriot-Watt)"}
      ]}
    ],
    master: [
      {label: "Педагогика и психология", options: [
        {value: "7M01101", text: "7M01101 — Педагогика и психология"},
        {value: "7M01105", text: "7M01105 — Педагогическое измерение"}
      ]},
      {label: "Дошкольное обучение и воспитание", options: [
        {value: "7M01201", text: "7M01201 — Дошкольное обучение и воспитание"}
      ]},
      {label: "Подготовка учителей без предметной специализации", options: [
        {value: "7M01301", text: "7M01301 — Педагогика и методика начального обучения"}
      ]},
      {label: "Подготовка педагогов музыки", options: [
        {value: "7M01401", text: "7M01401 — Музыкальное образование"}
      ]},
      {label: "Подготовка педагогов физической культуры", options: [
        {value: "7M01404", text: "7M01404 — Физическая культура и спорт"}
      ]},
      {label: "Подготовка педагогов художественного труда, графики и проектирования", options: [
        {value: "7M01405", text: "7M01405 — Визуальное искусство, ХТГ и проектирование"}
      ]},
      {label: "Подготовка педагогов математики", options: [
        {value: "7M01501", text: "7M01501 — Математика"}
      ]},
      {label: "Подготовка педагогов физики", options: [
        {value: "7M01502", text: "7M01502 — Физика"}
      ]},
      {label: "Подготовка педагогов информатики", options: [
        {value: "7M01503", text: "7M01503 — Информатика"}
      ]},
      {label: "Подготовка педагогов химии", options: [
        {value: "7M01504", text: "7M01504 — Химия"}
      ]},
      {label: "Подготовка педагогов биологии", options: [
        {value: "7M01505", text: "7M01505 — Биология"}
      ]},
      {label: "Подготовка педагогов географии", options: [
        {value: "7M01506", text: "7M01506 — География"}
      ]},
      {label: "Подготовка педагогов истории", options: [
        {value: "7M01601", text: "7M01601 — История"}
      ]},
      {label: "Подготовка педагогов казахского языка и литературы", options: [
        {value: "7M01701", text: "7M01701 — Казахский язык и литература"}
      ]},
      {label: "Подготовка педагогов русского языка и литературы", options: [
        {value: "7M01704", text: "7M01704 — Русский язык и литература в школах с нерусским"}
      ]},
      {label: "Подготовка педагогов иностранного языка", options: [
        {value: "7M01706", text: "7M01706 — Иностранный язык: два иностранных языка"}
      ]},
      {label: "Специальная педагогика", options: [
        {value: "7M01901", text: "7M01901 — Специальная педагогика"}
      ]},
      {label: "История и археология", options: [
        {value: "7M02201", text: "7M02201 — История"}
      ]},
      {label: "Переводческое дело, синхронный перевод", options: [
        {value: "7M02302", text: "7M02302 — Переводческое дело"}
      ]},
      {label: "Иностранная филология", options: [
        {value: "7M02303", text: "7M02303 — Иностранная филология"}
      ]},
      {label: "Филология", options: [
        {value: "7M02304", text: "7M02304 — Филология"}
      ]},
      {label: "Психология", options: [
        {value: "7M03101", text: "7M03101 — Психология"}
      ]},
      {label: "Менеджмент и управление", options: [
        {value: "7M04101", text: "7M04101 — Экономика"},
        {value: "7M04102", text: "7M04102 — Менеджмент"},
        {value: "7M04108", text: "7M04108 — Деловое администрирование"},
        {value: "7M04119", text: "7M04119 — Деловое администрирование"}
      ]},
      {label: "Финансы, банковское дело и страховое дело", options: [
        {value: "7M04104", text: "7M04104 — Финансы"}
      ]},
      {label: "Государственное и местное управление", options: [
        {value: "7M04105", text: "7M04105 — Государственное и местное управление"}
      ]},
      {label: "Маркетинг и реклама", options: [
        {value: "7M04121", text: "7M04121 — Цифровой маркетинг"}
      ]},
      {label: "Право", options: [
        {value: "7M04201", text: "7M04201 — Юриспруденция"},
        {value: "7M04202", text: "7M04202 — Юриспруденция"}
      ]},
      {label: "Биология", options: [
        {value: "7M05101", text: "7M05101 — Биология"}
      ]},
      {label: "Технология охраны окружающей среды", options: [
        {value: "7M05201", text: "7M05201 — Экология"}
      ]},
      {label: "Физика", options: [
        {value: "7M05301", text: "7M05301 — Физика"}
      ]},
      {label: "Математика и статистика", options: [
        {value: "7M05401", text: "7M05401 — Математика"}
      ]},
      {label: "Информационные технологии", options: [
        {value: "7M06102", text: "7M06102 — Информационные системы"},
        {value: "7M06103", text: "7M06103 — Вычислительная техника и программное обеспечение"}
      ]},
      {label: "Химическая инженерия и процессы", options: [
        {value: "7M07102", text: "7M07102 — Химическая технология органических веществ"}
      ]},
      {label: "Транспорт, транспортная техника и технологии", options: [
        {value: "7M07101", text: "7M07101 — Транспорт, транспортная техника и технология"},
        {value: "7M07107", text: "7M07107 — Транспорт, транспортная техника и технология"}
      ]},
      {label: "Энергетика и электротехника", options: [
        {value: "7M07106", text: "7M07106 — Электроэнергетика"}
      ]},
      {label: "Горная инженерия", options: [
        {value: "7M07201", text: "7M07201 — Горное дело"}
      ]},
      {label: "Нефтяная инженерия", options: [
        {value: "7M07202", text: "7M07202 — Нефтегазовое дело"}
      ]},
      {label: "Металлургическая инженерия", options: [
        {value: "7M07203", text: "7M07203 — Металлургия"}
      ]}
    ],
    doctor: [
      {label: "Программы докторантуры", options: [
        {value: "8D01301", text: "8D01301 — Педагогика и методика начального обучения"},
        {value: "8D02201", text: "8D02201 — История"},
        {value: "8D02303", text: "8D02303 — Иностранная филология"},
        {value: "8D02304", text: "8D02304 — Филология"},
        {value: "8D04101", text: "8D04101 — Экономика"},
        {value: "8D05302", text: "8D05302 — Химия и технология современных материалов"},
        {value: "8D05301", text: "8D05301 — Физика"},
        {value: "8D05401", text: "8D05401 — Математика"},
        {value: "8D07203", text: "8D07203 — Металлургия"}
      ]}
    ]
  };

  const levelSelect = document.getElementById('education_level');
  const specialtySelect = document.getElementById('specialty');

  levelSelect.addEventListener('change', function() {
    const level = this.value;
    specialtySelect.innerHTML = '<option value="" disabled selected>Выберите желаемую специальность</option>';

    if (level && groups[level]) {
      groups[level].forEach(group => {
        if (group.options.length > 0) {
          const optgroup = document.createElement('optgroup');
          optgroup.label = group.label;
          group.options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt.value;
            option.textContent = opt.text;
            optgroup.appendChild(option);
          });
          specialtySelect.appendChild(optgroup);
        }
      });
    }
  });
</script>
{% endblock %}