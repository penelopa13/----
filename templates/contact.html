{% extends "base.html" %}

{% block title %}Контакты - Талапкер{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <h1>Контакты</h1>
    <p>Приёмная комиссия: +7 (700) 123-45-67</p>
    <p>Email: info@university.kz</p>
    <form class="contact-form" id="contactForm">
      <input type="text" name="name" placeholder="Ваше имя" required>
      <input type="email" name="email" placeholder="Ваш Email" required>
      <textarea name="message" placeholder="Сообщение" required></textarea>
      <button type="submit" class="btn">Отправить</button>
    </form>
    <p id="formResult"></p>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('contactForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = e.target;
  const data = {
    name: form.name.value,
    email: form.email.value,
    message: form.message.value
  };
  const res = await fetch('/api/contact', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
  const result = await res.json();
  document.getElementById('formResult').textContent = result.message;
  if(result.status === 'ok') form.reset();
});
</script>
{% endblock %}
