{% extends "base.html" %}
{% block title %}
    {% if session.get('lang', current_user.language) == 'kk' %}–ú–µ–Ω—ñ“£ –∫–∞–±–∏–Ω–µ—Ç
    {% elif session.get('lang', current_user.language) == 'en' %}My Profile
    {% else %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç{% endif %}
{% endblock %}

{% block content %}
<section class="profile-section">
    <div class="profile-card wide">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –∞–≤–∞—Ç–∞—Ä -->
        <div class="profile-header">
            <div class="avatar-circle">
                <i class="fas fa-user"></i>
            </div>
            <div>
                <h2>{{ user.name }}</h2>
                <p class="subtitle">{{ user.email }}</p>
            </div>
            <a href="{{ url_for('logout') }}" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>

        <div class="profile-grid">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="profile-info">
                <div class="info-item">
                    <span class="label">–†–æ–ª—å:</span>
                    <span class="value">
                        {{ user.is_admin and '–ê–¥–º–∏–Ω' or '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }}
                    </span>
                </div>

                {% if result %}
                <div class="info-item">
                    <span class="label">–ï–ù–¢ –±–∞–ª–ª—ã:</span>
                    <span class="value highlight">{{ user.ent_total }}</span>
                </div>

                <div class="info-item">
                    <span class="label">MBTI:</span>
                    <span class="value mbti">{{ result.mbti_type }}</span>
                </div>

                <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
                <div class="progress-container">
                    <div class="progress-label">
                        –ü–æ—Ä–æ–≥ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è: <strong>85</strong> / 140
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{ (user.ent_total / 140 * 100)|round(0) }}%"></div>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ + –î–µ–π—Å—Ç–≤–∏—è -->
            <div class="profile-actions-column">
                {% if result %}
                <div class="recommendations">
                    <h4>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h4>
                    <p class="suggestions">{{ result.recommended_programs.ai_suggestions }}</p>
                </div>
                {% endif %}

                <div class="quick-actions">
                    <a href="{{ url_for('calculator') }}" class="action-card">
                        <i class="fas fa-calculator"></i>
                        <span>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ï–ù–¢</span>
                    </a>
                    <a href="{{ url_for('test_psy') }}" class="action-card">
                        <i class="fas fa-brain"></i>
                        <span>–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</span>
                    </a>
                    <a href="{{ url_for('status') }}" class="action-card">
                        <i class="fas fa-file-alt"></i>
                        <span>–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}