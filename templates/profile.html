{% extends "base.html" %}
{% block title %}
    {% if session.get('lang', current_user.language) == 'kk' %}Менің кабинет
    {% elif session.get('lang', current_user.language) == 'en' %}My Cabinet
    {% else %}Мой кабинет{% endif %}
{% endblock %}

{% block content %}
<section class="profile-section">
    <div class="profile-card">
        <h2>
            {% if session.get('lang', current_user.language) == 'kk' %}Менің кабинет
            {% elif session.get('lang', current_user.language) == 'en' %}My Cabinet
            {% else %}Мой кабинет{% endif %}
        </h2>

        <div class="profile-info">
            <p><strong>
                {% if session.get('lang', current_user.language) == 'kk' %}Аты-жөні:
                {% elif session.get('lang', current_user.language) == 'en' %}Name:
                {% else %}Имя:{% endif %}
            </strong> {{ user.name }}</p>

            <p><strong>Email:</strong> {{ user.email }}</p>

            <p><strong>
                {% if session.get('lang', current_user.language) == 'kk' %}Рөл:
                {% elif session.get('lang', current_user.language) == 'en' %}Role:
                {% else %}Роль:{% endif %}
            </strong> 
                {{ user.is_admin and 
                    (session.get('lang', current_user.language) == 'kk' and 'Админ' or 
                     session.get('lang', current_user.language) == 'en' and 'Admin' or 'Админ') or 
                    (session.get('lang', current_user.language) == 'kk' and 'Қолданушы' or 
                     session.get('lang', current_user.language) == 'en' and 'User' or 'Пользователь') }}
            </p>

            {% if result %}
                <p><strong>
                    {% if session.get('lang', current_user.language) == 'kk' %}ЕНТ баллы:
                    {% elif session.get('lang', current_user.language) == 'en' %}ENT Score:
                    {% else %}Баллы ЕНТ:{% endif %}
                </strong> {{ user.ent_total }}</p>

                <p><strong>
                    {% if session.get('lang', current_user.language) == 'kk' %}MBTI типі:
                    {% elif session.get('lang', current_user.language) == 'en' %}MBTI Type:
                    {% else %}MBTI тип:{% endif %}
                </strong> {{ result.mbti_type }}</p>

                <div class="recommendations">
                    <p><strong>
                        {% if session.get('lang', current_user.language) == 'kk' %}Ұсыныстар:
                        {% elif session.get('lang', current_user.language) == 'en' %}Recommendations:
                        {% else %}Рекомендации:{% endif %}
                    </strong></p>
                    <p class="suggestions">{{ result.recommended_programs.ai_suggestions }}</p>
                </div>
            {% endif %}
        </div>

        <div class="profile-actions">
            <a href="{{ url_for('calculator') }}" class="btn orange">
                {% if session.get('lang', current_user.language) == 'kk' %}ЕНТ есептеу
                {% elif session.get('lang', current_user.language) == 'en' %}ENT Calculator
                {% else %}Калькулятор ЕНТ{% endif %}
            </a>
            <a href="{{ url_for('test_psy') }}" class="btn orange">
                {% if session.get('lang', current_user.language) == 'kk' %}Тест
                {% elif session.get('lang', current_user.language) == 'en' %}Test
                {% else %}Тест{% endif %}
            </a>
            <a href="{{ url_for('logout') }}" class="btn orange">
                {% if session.get('lang', current_user.language) == 'kk' %}Шығу
                {% elif session.get('lang', current_user.language) == 'en' %}Logout
                {% else %}Выйти{% endif %}
            </a>
        </div>
    </div>
</section>
{% endblock %}